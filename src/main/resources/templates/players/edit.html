<!DOCTYPE html>
<!--
  【解説】
  layout:decorator で 利用する layout を指定しています.
  拡張子なしのファイル名を指定することで layout の切り替えが可能です.
-->
<html lang="ja"
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4"
  layout:decorator="layout">
<head>
  <!-- 【解説】 <title> の要素は、 layout.html 側の $CONTENT_TITLE で利用されます. -->
  <title>選手更新</title>
</head>
<body>
  <!--
    【解説】
    layout ファイルの <div layout:fragment="content">...</div> の部分が、
    layout:fragment="content" の中身に置き換わります.
  -->
  <div layout:fragment="content" class="container">
    <h2>選手更新</h2>
    <!--
      【解説】
      th:object="${playerForm}" で、playerForm を選択しておくと、子要素の中で playerForm.xxx と書かずに済みます.
      th:object で選択したものは、子要素で *{} で指定できます.
      親要素 th:object なし + 子要素 ${playerForm.name} = 親要素 th:object="${playerForm}" + 子要素 *{name}
    -->
    <form th:action="@{/players/update}" th:object="${playerForm}" method="post">
      <!-- 【解説】th:field="*{squadNumber}" で、playerForm のプロパティとバインディングしています -->
      <fieldset class="form-group"
        th:classappend="${#fields.hasErrors('squadNumber')}? 'has-danger'">
        <label for="squadNumber" class="form-control-label">背番号</label>
        <input type="text" class="form-control"
          id="squadNumber"
          name="squadNumber"
          th:field="*{squadNumber}"
          th:classappend="${#fields.hasErrors('squadNumber')}? 'form-control-danger'">
        <small class="text-danger"
          th:if="${#fields.hasErrors('squadNumber')}"
          th:errors="*{squadNumber}">error occurred !!</small>
      </fieldset>
      <fieldset class="form-group"
        th:classappend="${#fields.hasErrors('name')}? 'has-danger'">
        <label for="name" class="form-control-label">名前</label>
        <input type="text" class="form-control"
          id="name"
          name="name"
          th:field="*{name}"
          th:classappend="${#fields.hasErrors('name')}? 'form-control-danger'">
        <small class="text-danger"
          th:if="${#fields.hasErrors('name')}"
          th:errors="*{name}">error occurred !!</small>
      </fieldset>
      <fieldset class="form-group"
        th:classappend="${#fields.hasErrors('nationalityId')}? 'has-danger'">
        <label for="nationalityId" class="form-control-label">国籍</label>
        <select class="form-control"
          th:field="*{nationalityId}">
          <option
            th:each="nationality : ${nationalities}"
            th:value="${nationality.id}"
            th:text="${nationality.name}"
            th:classappend="${#fields.hasErrors('nationalityId')}? 'form-control-danger'">ドイツ</option>
        </select>
        <small class="text-danger"
          th:if="${#fields.hasErrors('nationalityId')}"
          th:errors="*{nationalityId}">error occurred !!</small>
      </fieldset>
      <fieldset class="form-group"
        th:classappend="${#fields.hasErrors('positionCode')}? 'has-danger'">
        <label for="positionCode" class="form-control-label">ポジション</label>
        <select class="form-control"
          th:field="*{positionCode}">
          <option
            th:each="code : ${positionClasses}"
            th:value="${code.id}"
            th:text="${code.name}"
            th:classappend="${#fields.hasErrors('positionCode')}? 'form-control-danger'">FW</option>
        </select>
        <small class="text-danger"
          th:if="${#fields.hasErrors('positionCode')}"
          th:errors="*{positionCode}">error occurred !!</small>
      </fieldset>
      <a th:href="@{/players}" class="btn btn-secondary">戻る</a>
      <input type="hidden" name="id" th:value="${id}">
      <button type="submit" class="btn btn-primary">更新</button>
    </form>
  </div><!-- /.container -->
</body>
</html>